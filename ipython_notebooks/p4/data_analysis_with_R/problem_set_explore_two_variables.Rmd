---
title: "R Notebook"
output: html_notebook
---

*1. Quiz: price vs. x*
# In this problem set, you'll continue
# to explore the diamonds data set.

# Your first task is to create a
# scatterplot of price vs x.
# using the ggplot syntax.
```{r}
head(diamonds)
ggplot(data = diamonds, aes(x = x, y = price)) + 
  geom_point(color = 'orange') + 
  geom_line(stat = 'summary', fun.y = mean)
```

*2. Quiz: Findings - price vs. x*
Observations:
The releationship seems quite linear. Although the price range for x is quite wide, price does steadily go up as x rises.
From answer:
"Did you notice some outliers and an exponential relationship between price and x?
"

*3. Quiz: Correlations*
What is the correlation between price and x?
```{r}
cor.test(diamonds$price, diamonds$x)
```
0.88
What is the correlation between price and y?
```{r}
cor.test(diamonds$price, diamonds$y)
```
0.87
What is the correlation between price and z?
```{r}
cor.test(diamonds$price, diamonds$z)
```
0.86

*4. Quiz: price vs. depth*
# Create a simple scatter plot of price vs depth.
```{r}
ggplot() + 
  geom_point(data = diamonds, aes(x = depth, y = price))
```

*5. Quiz: Adjustments - price vs. depth*
# Change the code to make the transparency of the
# points to be 1/100 of what they are now and mark
# the x-axis every 2 units. See the instructor notes
# for two hints.
```{r}
summary(diamonds$depth)

ggplot(data = diamonds, aes(x = depth, y = price)) + 
  geom_point(alpha = 1/100) + 
  scale_x_continuous(breaks = seq(40,80,2))
```

*6. Quiz: Typical depth range*
Based on the scatterplot of depth vs. price, most diamonds are between what values of depth?
59 to 64

Control (own initiative):

```{r}
library(dplyr)

View(group_by(diamonds,round(depth,0)) %>% 
  summarise(count = n()))

```

*7. Quiz: Correlation - price and depth*
What's the correlation of depth vs. price?
```{r}
cor.test(diamonds$depth, diamonds$price)
```
-0.01
Based on the correlation coefficient would you use depth to predict the price of a diamond? Why?
No. Because the according to the correlation coefficient there is no statistically significant relationship between the two variables.

*8. Quiz: price vs. carat*
# Create a scatterplot of price vs carat
# and omit the top 1% of price and carat
# values.
```{r}
#notes
quantile(diamonds$price,0.99)
nrow(diamonds)
nrow(subset(diamonds, price < quantile(diamonds$price,0.99) &
                     carat < quantile(diamonds$carat,0.99)))

#the plot
ggplot(data = subset(diamonds, price < quantile(diamonds$price,0.99) &
                     carat < quantile(diamonds$carat,0.99)),
       aes(x = carat, y = price) ) + 
  geom_point()

```

*9. Quiz: price vs. volume*
# Create a scatterplot of price vs. volume (x * y * z).
# This is a very rough approximation for a diamond's volume.
# Create a new variable for volume in the diamonds data frame.
# This will be useful in a later exercise.
# Don't make any adjustments to the plot just yet.
```{r}
ggplot(data = diamonds, aes(x = (x*y*z), y = price)) + 
  geom_point()

diamonds$volume <- diamonds$x * diamonds$y * diamonds$z

ggplot(data = diamonds, aes(x = volume, y = price)) + 
  geom_point()

subset(diamonds, volume == 0)
```

*10. Quiz: Findings - price vs volume*
Observations:
The general trend is that price goes sharply upwards as volume increases.
There's a few noticable outliers, where the volume is much higher per price point than the general trend. There are also quite a few diamonds with volume 0, which must be due to lack of data for at least one of the x, y and z variables.
```{r}
#To get count
library(plyr)
count(diamonds$volume == 0)
#Detaching plyr to avoid conflicts with dplyr
detach("package:plyr", unload = TRUE)
```

*11. Quiz: *

*12. Quiz: *
*13. Quiz: *
*14. Quiz: *
*15. Quiz: *